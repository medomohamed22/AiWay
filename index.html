<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, interactive-widget=resizes-content"/>
    <title>AIWay</title>

    <!-- External Libraries -->
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@4.3.0/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.11/dist/purify.min.js"></script>

    <!-- Our CSS -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="landingPage" class="landing-overlay">
        <button class="landing-lang-btn" onclick="toggleLanguage()" id="landingLangBtn">AR</button>

        <div class="landing-logo-text">AiWay</div>
        <div class="landing-desc" id="txtLandingDesc">Generate professional images using state-of-the-art AI technologies</div>
        
        <div class="features-title" id="txtFeaturesTitle">Site Supports</div>
       <div class="features-container">
            <button class="feature-btn f-images">
                <span>Ai Images</span>
            </button>
            
            <button class="feature-btn f-video">
                <span>Ai Video</span>
                <span class="soon-badge" id="txtSoonVideo">Soon</span>
            </button>

            <button class="feature-btn f-images">
                <span>Ai Chat</span>
            </button>
        </div>

        <button class="pi-login-btn" onclick="authenticatePi()">
            <svg viewBox="0 0 32 32"><path d="M16 32C7.163 32 0 24.837 0 16S7.163 0 16 0s16 7.163 16 16-7.163 16-16 16zm-2.5-22h-3v12h3V10zm8 0h-3v12h3V10z"/></svg>
            <span id="txtLogin">Pi Login</span>
        </button>
    </div>

    <div class="header">
        <div class="header-title-area" onclick="toggleModelMenu()">
            <div style="font-weight:700; font-size:16px; display:flex; align-items:center;" id="headerModelName">
                Imagen 4
            </div>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="#777" id="modelChevron" style="transition:0.3s; margin-inline-start:5px;"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
        </div>
        <div class="header-left">
            <button class="lang-btn" onclick="toggleLanguage()" id="langBtn">AR</button>
            <button class="token-btn" onclick="openBuyModal()">
                <svg class="token-icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05 1.18 1.91 2.53 1.91 1.38 0 2.53-.83 2.53-1.94 0-.85-.38-1.55-2.03-1.95l-1.04-.25c-2.31-.55-3.62-1.89-3.62-3.63 0-1.86 1.34-3.2 3.14-3.56V4h2.67v1.9c1.68.39 2.92 1.43 3.08 3.13h-2.01c-.13-.88-.95-1.57-2.19-1.57-1.32 0-2.19.85-2.19 1.83 0 .74.43 1.35 2.17 1.77l.82.2c2.51.6 3.84 1.95 3.84 3.73 0 1.96-1.5 3.33-3.22 3.66z"/></svg>
                <span id="tokenBalance">0</span> Ï€
            </button>
        </div>
    </div>

    <div class="model-menu" id="modelMenu"></div>

    <div class="chat-container" id="chatContainer">
        <div style="text-align:center; color:#555; margin-top:50px;" id="emptyMsg">
            Welcome to AIWay <br> Select a model and imagine
        </div>
    </div>

    <div class="footer-container">
        <div class="control-bar">
            <button class="footer-btn" onclick="openGallery()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4l2.03 2.71L16 11l4 5H8l3-4z"/></svg>
                <span id="txtGallery">Gallery</span>
            </button>
            
            <div class="aspect-menu-dropdown" id="aspectMenu"></div>
            <button class="footer-btn" id="aspectTriggerBtn" onclick="toggleAspectMenu(event)">
                <div style="display:flex; align-items:center; gap:8px;">
                    <span id="currentAspectIcon"></span>
                    <span id="currentAspectLabel">1:1</span>
                </div>
                <svg width="10" height="10" viewBox="0 0 24 24" fill="#777"><path d="M7 10l5 5 5-5z"/></svg>
            </button>
        </div>

        <div class="input-row">
            <textarea id="promptInput" class="input-box" rows="1" placeholder="Imagine anything..." dir="auto"></textarea>
            <button class="send-btn" id="sendBtn" onclick="sendPrompt()">
                <svg id="sendIcon" width="22" height="22" viewBox="0 0 24 24" fill="white"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                <span id="countdownEl" class="countdown-text" style="display:none;"></span>
            </button>
        </div>
    </div>

    <div id="galleryModal" class="modal-overlay">
        <div class="modal-window" style="height:80%;">
            <div class="modal-header">
                <span style="font-weight:700; color:white;" id="txtGalleryTitle">My Gallery</span>
                <button onclick="document.getElementById('galleryModal').style.display='none'" style="background:none; border:none; color:white; font-size:24px;">âœ•</button>
            </div>
            <div class="gallery-grid" id="galleryGrid"></div>
        </div>
    </div>

    <div id="buyModal" class="modal-overlay">
        <div class="modal-window">
            <div class="modal-header">
                <span style="font-weight:700; color:white;" id="txtBuyTitle">Buy Tokens</span>
                <button onclick="document.getElementById('buyModal').style.display='none'" style="background:none; border:none; color:white; font-size:24px;">âœ•</button>
            </div>
            <div class="buy-grid" id="buyGrid"></div>
        </div>
    </div>

    <div id="downloadInfoModal" class="modal-overlay">
        <div class="modal-window" style="padding:20px; align-items:center;">
            <div class="dl-help-icon">ðŸ“‹</div>
            <div class="dl-help-title" id="txtDlTitle">Link Copied!</div>
            <div class="dl-help-text" id="txtDlDesc">
                Due to Pi Browser limitations, please paste this link into Google Chrome to download the image immediately.
            </div>
            <div class="dl-copy-box" id="dlLinkBox">...</div>
            <button class="g-btn g-down" onclick="document.getElementById('downloadInfoModal').style.display='none'" style="width:100%; max-width:200px; padding:12px;">OK</button>
        </div>
    </div>

</body>
<script src="script.js"></script>
</html>
